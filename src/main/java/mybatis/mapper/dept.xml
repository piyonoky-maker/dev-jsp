<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="mybatis.mapper.DeptMapper">

	<delete id="deptDelete" parameterType="int">
		DELETE FROM DEPT WHERE DEPTNO = #{value}
	</delete>
 
	<update id="deptUpdate" parameterType="map">  
		UPDATE dept
		   SET dname  = #{dname}
		   		,loc = #{loc}
		 WHERE deptno = #{deptno}		 
	</update>
 
<!-- 
	<update id="deptUpdate" parameterType="lab.vo.DeptVO">  
		UPDATE dept
		   SET dname  = #{dname}
		   		,loc = #{loc}
		 WHERE deptno = #{deptno}		 
	</update>
-->
 
 
	<insert id="deptInsert" parameterType="lab.vo.DeptVO">  
		insert into dept (deptno, dname, loc) 
		values ( #{deptno}, #{dname}, #{loc} ) 
	</insert>

	<select id="currentDate" parameterType="string" resultType="string">
		SELECT TO_CHAR(SYSDATE, 'YYYY-MM-DD') FROM DUAL
	</select>
	  
<!-- 
	myBatis 에서는 조회 결과에 대해서 resultType에 자동으로 담아 준다
	이때 타입이 Map이어서 키값이 필요한데 키값이 대문자로 저장됨
	리액트에서는 컴포넌트 일때 대문자로 써야 한다
	Alias로 변수명을 선언해야 함
	이부분에 있어 변수는 소문자로 사용함 -> 변수명을 통일하고 일관되게 사용 해야함
 -->
	<select id="deptList" parameterType="lab.vo.DeptVO" resultType="Map">  
		SELECT DEPTNO as "deptno", DNAME as "dname", LOC as "loc" FROM DEPT
		<if test='dname!=null'>
			WHERE DNAME LIKE '%'|| #{dname} ||'%'
		</if>
	</select>  
	

	
</mapper>